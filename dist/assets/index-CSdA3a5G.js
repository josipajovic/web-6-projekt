(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function p(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=p(t);fetch(t.href,o)}})();let c,l,d=!1;const a=document.getElementById("installBtn");window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),c=e,a.hidden=!1,a.addEventListener("click",()=>{c.prompt(),c.userChoice.then(r=>{console.log(r.outcome==="accepted"?"User installed the app":"User dismissed the installation"),c=null})})});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("Service Worker registered:",e),e.update(),e.addEventListener("updatefound",()=>{const r=e.installing;r.addEventListener("statechange",()=>{r.state==="activated"&&window.location.reload()})})}).catch(e=>console.log("Service Worker registration failed:",e))});"serviceWorker"in navigator&&"SyncManager"in window&&navigator.serviceWorker.ready.then(e=>{e.sync.register("send-push-notification").then(()=>console.log("Background Sync Registered")).catch(r=>console.error("Error registering background sync:",r))});"BarcodeDetector"in globalThis?(console.log("Barcode Detector supported!"),l=new BarcodeDetector({formats:["code_39","codabar","ean_13"]})):console.log("Barcode Detector is not supported by this browser.");function u(e){console.log("Barcode detected:",e),document.getElementById("popup-message").textContent=`Barcode detected ${e}`,document.getElementById("popup").style.display="flex"}window.closePopup=function(){document.getElementById("popup").style.display="none",location.reload()};function f(){d||(n.readyState>=2&&l.detect(n).then(e=>{e.length>0&&(d=!0,console.log(`Detected: ${e[0].rawValue}`),n.pause(),u(e[0].rawValue))}).catch(e=>console.error("Detection error:",e)),requestAnimationFrame(f))}const n=document.getElementById("video");navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(e=>{n.srcObject=e,n.onloadedmetadata=()=>{n.play(),f()}}).catch(console.error);window.submitManualBarcode=function(){const e=document.getElementById("manualBarcode").value;e&&u(e)};
